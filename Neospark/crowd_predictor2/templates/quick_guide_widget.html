<!-- Quick Guide Widget -->
<div class="card shadow-sm border-info" id="quickGuideWidget">
    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
        <h6 class="mb-0"><i class="bi bi-compass"></i> Quick Visit Guide</h6>
        <button class="btn btn-sm btn-light" onclick="toggleGuideWidget()">
            <i class="bi bi-chevron-up" id="guideToggleIcon"></i>
        </button>
    </div>
    <div class="card-body" id="guideWidgetBody">
        <div class="row text-center">
            <div class="col-3">
                <div class="bg-light p-2 rounded">
                    <i class="bi bi-clock text-primary"></i>
                    <div class="small mt-1">
                        <strong>Best Time</strong><br>
                        <span class="text-success">6-9 AM</span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="bg-light p-2 rounded">
                    <i class="bi bi-stopwatch text-warning"></i>
                    <div class="small mt-1">
                        <strong>Duration</strong><br>
                        <span>1-2 hrs</span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="bg-light p-2 rounded">
                    <i class="bi bi-currency-rupee text-success"></i>
                    <div class="small mt-1">
                        <strong>Min Cost</strong><br>
                        <span>â‚¹50</span>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="bg-light p-2 rounded">
                    <i class="bi bi-people text-info"></i>
                    <div class="small mt-1">
                        <strong>Crowd</strong><br>
                        <span id="quickCrowdStatus">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-3">
            <h6 class="text-primary">Quick Tips:</h6>
            <ul class="small mb-2">
                <li>Book slots in advance</li>
                <li>Dress modestly</li>
                <li>Arrive 15 min early</li>
                <li>Keep phones silent</li>
            </ul>
        </div>
        
        <div class="d-grid gap-2">
            <a href="{{ url_for('temple_guide', temple_id=temple.id) if temple else '#' }}" class="btn btn-info btn-sm">
                <i class="bi bi-book"></i> Complete Guide
            </a>
        </div>
    </div>
</div>

<script>
function toggleGuideWidget() {
    const body = document.getElementById('guideWidgetBody');
    const icon = document.getElementById('guideToggleIcon');
    
    if (body.style.display === 'none') {
        body.style.display = 'block';
        icon.className = 'bi bi-chevron-up';
    } else {
        body.style.display = 'none';
        icon.className = 'bi bi-chevron-down';
    }
}

// Load crowd status for quick guide
{% if temple %}
fetch('/api/temple/{{ temple.id }}/crowd')
.then(response => response.json())
.then(data => {
    const statusElement = document.getElementById('quickCrowdStatus');
    if (statusElement) {
        statusElement.textContent = data.status || 'Low';
        statusElement.className = `text-${data.status === 'Low' ? 'success' : data.status === 'Medium' ? 'warning' : 'danger'}`;
    }
})
.catch(() => {
    const statusElement = document.getElementById('quickCrowdStatus');
    if (statusElement) {
        statusElement.textContent = 'Low';
        statusElement.className = 'text-success';
    }
});
{% endif %}
</script>

<style>
#quickGuideWidget {
    position: sticky;
    top: 20px;
    z-index: 100;
}

#quickGuideWidget .card-body {
    transition: all 0.3s ease;
}
</style>